

task:
5. At   every   competition   of   the   National   AnglingChampionship,
the   results   of   the competitors were recorded and put into a text file.
Every line of the file contains the name of  the  angler  the  ID  of  the  competition(string  without  spaces), 
and  the speciesand  the size  of  the  caught  fishes(pair  of  a  string  without  spaces  and  a  natural  number).
Data  is separatedby space  or  tab.  The  lines  of  the  file  are  ordered  by contest  ID.
The  file  is assumed to be in the correct form. Sample line in the file:PeterLAC0512 carp45 carp53 catfish96


(1) Is  there  an  angler  who  has  caught  only and  at  least  three catfishes  on  one  of  his contests? Give the contest ID, too.
(2) How  many  conteststhere  are  where  at  least  one  angler  has  caught  only  and  at  least three catfishes?

1) First partPlan of the main program:A = (f : infile(Line), l : ğ•ƒ, elem: Contest)
Line= rec (angler: String, contest: String, catches: Catch*)
Catch= rec (species: String, size: â„•)
Contest =rec(angler: String, contest: String, counter: â„•

New state space:
A = (t : enor(Contest), l : ğ•ƒ, elem: Contest)
Pre=( t = tâ€™)
Post=( ğ‘™,ğ‘’ğ‘™ğ‘’ğ‘š=ğ‘ºğ‘¬ğ‘¨ğ‘¹ğ‘ªğ‘¯ğ‘’âˆˆğ‘¡â€²(ğ‘’.ğ‘ğ‘œğ‘¢ğ‘›ğ‘¡ğ‘’ğ‘Ÿâ‰¥3))
          l  :=false;  t.first()
           ïƒ˜l ïƒ™ïƒ˜t.end()
l, elem:= t.current().counterâ‰¥3, t.current()
            t.next()

Analogy: linearsearch, custom enumerator
E             ~ Contest
cond(e)   ~ e.counterâ‰¥3

Enumerator of Contests:
enor(Contest)first(), next(), current(), end()f : infile(Line)first()~ next()cur: Contestnext()~ see belowend: ğ•ƒcurrent()~ return curend()~ return endStatus= { norm, abnorm }Inenor(Contest), operationsfirst()andnext()are the same.They have to solve the following task: read the next line of the textfile(f sequentialinputfile). If there is no more, then vaiable end gets true. If there is any, the current anglerâ€™sname and the contest ID can be extracted. Then, the â€catfishâ€species can be counted in the catches..Anext= (f: infile(Line),cur : Contest,end:ğ•ƒ)Prenext= (f = fâ€™)Postnext= ( sf, df, f = read(fâ€™)ïƒ™end=(sf=abnorm)ïƒ™ïƒ˜endâ†’cur.angler= df.anglerïƒ™cur.contest= df.contestïƒ™cur.counter=  âˆ‘1ğ‘–âˆˆ[1..|ğ‘‘ğ‘“.ğ‘ğ‘ğ‘¡ğ‘â„ğ‘’ğ‘ |]ğ‘‘ğ‘“.ğ‘ğ‘ğ‘¡ğ‘â„ğ‘’ğ‘ [ğ‘–].ğ‘ ğ‘ğ‘’ğ‘ğ‘–ğ‘’ğ‘ ="ğ‘ğ‘ğ‘¡ğ‘“ğ‘–ğ‘ â„")sf, df, f : readend := sf=abnormïƒ˜endcur.angler,  cur.contest:= df.angler, df.contestcur.counter:= 0SKIPi = 1 .. âˆ£df.catchesâˆ£df.catches[i].species= â€catfishâ€cur.counter:= cur.counter+ 1SKIPAnalogy: counting, on interval enumeratort:[m .. n ]~ i : [1.. |df.catches|]cond(i)~ df.catches[i].species=â€catfishâ€c~cur.counter



